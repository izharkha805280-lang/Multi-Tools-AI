<script src="script.js"></script>

    <script>
        function getThumbnail() {
            const url = document.getElementById('videoUrl').value;
            const resultArea = document.getElementById('resultArea');
            const thumbImg = document.getElementById('thumbImg');
            const downloadBtn = document.getElementById('downloadBtn');

            if (!url) {
                showError("Please paste a URL first!");
                return;
            }

            let videoId = "";

            try {
                // Method 1: Regular URL (youtube.com/watch?v=...)
                if (url.includes("v=")) {
                    videoId = url.split("v=")[1];
                    // Remove extra parameters after &
                    const ampersandPos = videoId.indexOf("&");
                    if (ampersandPos !== -1) {
                        videoId = videoId.substring(0, ampersandPos);
                    }
                } 
                // Method 2: Short URL (youtu.be/...)
                else if (url.includes("youtu.be/")) {
                    videoId = url.split("youtu.be/")[1];
                    // Remove extra parameters after ?
                    const questionPos = videoId.indexOf("?");
                    if (questionPos !== -1) {
                        videoId = videoId.substring(0, questionPos);
                    }
                }

                if (videoId) {
                    // Step 1: Pehle Max Resolution try karein
                    const imgUrl = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
                    
                    // Image load hone par hi display karein
                    thumbImg.onload = function() {
                        // Agar image ki width 120px hai (matlab YouTube ne 404 image bheji hai)
                        if (this.naturalWidth === 120) {
                            // Fallback to HQ image
                            this.src = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
                            downloadBtn.href = this.src;
                        }
                    }

                    thumbImg.src = imgUrl;
                    downloadBtn.href = imgUrl; // Download button link update
                    resultArea.style.display = "block";
                    showSuccess("Thumbnail Found!");
                } else {
                    throw new Error("Invalid ID");
                }

            } catch (e) {
                showError("Invalid YouTube URL! Please check again.");
                resultArea.style.display = "none";
            }
        }
    </script>
</body>
</html>
